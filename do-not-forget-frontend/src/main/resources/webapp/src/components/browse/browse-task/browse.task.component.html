<div class="container">
    <div class="slds-notify_container">
        <ngl-notification *ngIf="alertConfig.show" type="alert" [severity]="alertConfig.type"
                          (nglNotificationClose)="alertConfig.onClose($event)"
                          [timeout]="alertConfig.timeout" class="slds-theme--alert-texture">
            <h2>{{alertConfig.message}}</h2>
        </ngl-notification>
    </div>

    <ngb-tabset>
        <ngb-tab title="Current tasks" id="1">
            <template ngbTabContent>
                <!--NO TASKS ALERT-->
                <div class="alert alert-info" role="alert" *ngIf="!currentTasksPresent()">
                    You have no active tasks
                </div>

                <div *ngIf="currentTasksPresent()" class="row col-sm-12">
                    <input type="text" class="form-control col-sm-4 dnd-input" placeholder="Current task filter" [(ngModel)]="currentTaskFilterString">
                </div>

                <!--CURRENT TASKS-->
                <div class="row col-sm-12" *ngIf="currentTasksPresent()">
                    <div class="col-sm-4 card">
                        <div dnd-droppable (onDropSuccess)="changeTaskState($event, newTaskState)" [dropZones]="['demo1']"
                             class="panel panel-info card-block">
                            <div class="panel-heading card-title">New:</div>
                            <div class="panel-body">
                                <div *ngFor="let _task of tasks | currentTaskFilter | taskStateFilter:newTaskState | containsStringFilterPipe:currentTaskFilterString"
                                     class="panel panel-default"
                                     dnd-draggable [dragEnabled]="true" [dragData]="_task"
                                     [dropZones]="['demo1']">
                                    <div class="panel-body">
                                        <task-view [show-state]="false" [task]="_task"></task-view>
                                        <button class="btn btn-primary btn-sm" (click)="deleteTask(_task)">Delete</button>
                                        <button class="btn btn-primary btn-sm" (click)="editTask(_task)">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 card">
                        <div dnd-droppable (onDropSuccess)="changeTaskState($event, inProgressTaskState)" [dropZones]="['demo1']"
                             class="panel panel-info card-block">
                            <div class="panel-heading card-title">In progress:</div>
                            <div class="panel-body">
                                <div *ngFor="let _task of tasks | currentTaskFilter | taskStateFilter:inProgressTaskState"
                                     class="panel panel-default"
                                     dnd-draggable [dragEnabled]="true" [dragData]="_task"
                                     [dropZones]="['demo1']">
                                    <div class="panel-body">
                                        <task-view [show-state]="false" [task]="_task"></task-view>
                                        <button class="btn btn-primary btn-sm" (click)="deleteTask(_task)">Delete</button>
                                        <button class="btn btn-primary btn-sm" (click)="editTask(_task)">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 card">
                        <div dnd-droppable (onDropSuccess)="changeTaskState($event, finishedTaskState)" [dropZones]="['demo1']"
                             class="panel panel-info card-block">
                            <div class="panel-heading card-title">Finished:</div>
                            <div class="panel-body">
                                <div *ngFor="let _task of tasks | currentTaskFilter | taskStateFilter:finishedTaskState"
                                     class="panel panel-default"
                                     dnd-draggable [dragEnabled]="true" [dragData]="_task"
                                     [dropZones]="['demo1']">
                                    <div class="panel-body">
                                        <task-view [show-state]="false" [task]="_task"></task-view>
                                        <button class="btn btn-primary btn-sm" (click)="deleteTask(_task)">Delete</button>
                                        <button class="btn btn-primary btn-sm" (click)="editTask(_task)">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </ngb-tab>
        <ngb-tab title="Historical tasks" id="2">
            <template ngbTabContent>
                <!--NO HISTORICAL TASKS ALERT-->
                <div class="alert alert-info" role="alert" *ngIf="!historicalTasksPresent()">
                    You have no historical tasks
                </div>

                <div *ngIf="historicalTasksPresent()" class="row col-sm-12">
                    <input type="text" class="form-control col-sm-4 dnd-input" placeholder="Historical task filter" [(ngModel)]="historicalTaskFilterString">
                </div>

                <!--HISTORICAL TASKS-->
                <div class="row col-sm-12" *ngIf="historicalTasksPresent()">
                    <div class="col-sm-4 card">
                        <div dnd-droppable (onDropSuccess)="changeTaskState($event, newTaskState)" [dropZones]="['demo1']"
                             class="panel panel-info card-block">
                            <div class="panel-heading card-title">New:</div>
                            <div class="panel-body">
                                <div *ngFor="let _task of tasks | historicalTaskFilter | taskStateFilter:newTaskState | containsStringFilterPipe:historicalTaskFilterString"
                                     class="panel panel-default"
                                     dnd-draggable [dragEnabled]="true" [dragData]="_task"
                                     [dropZones]="['demo1']">
                                    <div class="panel-body">
                                        <task-view [show-state]="false" [task]="_task"></task-view>
                                        <button class="btn btn-primary btn-sm" (click)="deleteTask(_task)">Delete</button>
                                        <button class="btn btn-primary btn-sm" (click)="editTask(_task)">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 card">
                        <div dnd-droppable (onDropSuccess)="changeTaskState($event, inProgressTaskState)" [dropZones]="['demo1']"
                             class="panel panel-info card-block">
                            <div class="panel-heading card-title">In progress:</div>
                            <div class="panel-body">
                                <div *ngFor="let _task of tasks | historicalTaskFilter | taskStateFilter:inProgressTaskState"
                                     class="panel panel-default"
                                     dnd-draggable [dragEnabled]="true" [dragData]="_task"
                                     [dropZones]="['demo1']">
                                    <div class="panel-body">
                                        <task-view [show-state]="false" [task]="_task"></task-view>
                                        <button class="btn btn-primary btn-sm" (click)="deleteTask(_task)">Delete</button>
                                        <button class="btn btn-primary btn-sm" (click)="editTask(_task)">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4 card">
                        <div dnd-droppable (onDropSuccess)="changeTaskState($event, finishedTaskState)" [dropZones]="['demo1']"
                             class="panel panel-info card-block">
                            <div class="panel-heading card-title">Finished:</div>
                            <div class="panel-body">
                                <div *ngFor="let _task of tasks | historicalTaskFilter | taskStateFilter:finishedTaskState"
                                     class="panel panel-default"
                                     dnd-draggable [dragEnabled]="true" [dragData]="_task"
                                     [dropZones]="['demo1']">
                                    <div class="panel-body">
                                        <task-view [show-state]="false" [task]="_task"></task-view>
                                        <button class="btn btn-primary btn-sm" (click)="deleteTask(_task)">Delete</button>
                                        <button class="btn btn-primary btn-sm" (click)="editTask(_task)">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </ngb-tab>
    </ngb-tabset>

</div>


